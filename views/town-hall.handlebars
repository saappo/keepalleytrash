{{!-- Town Hall Page - No Auto-Close Version --}}
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <!-- Page Header -->
            <div class="text-center mb-5">
                <h1 class="display-4 text-primary">
                    <i class="fas fa-landmark me-3"></i><a href="#meetings" class="text-decoration-none">Upcoming Town Hall Meetings</a>
                </h1>
            </div>

            <!-- How City Government Works Section -->
            <div id="section-government" class="card shadow mb-5">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">
                        <i class="fas fa-sitemap me-2"></i>How the City of Dallas Works ‚Äî and Who's Accountable
                    </h2>
                </div>
                <div class="card-body">
                    <p class="lead">The City of Dallas is run under a Council‚ÄìManager form of government.</p>
                    <p>Here's what that means:</p>
                    
                    <div class="row mb-4">
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-users me-2"></i>City Council Members
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">‚úì Elected by the public to represent their districts.</li>
                                        <li class="mb-2">‚úì Approve city policies, budgets, and key appointments.</li>
                                        <li class="mb-2">‚úì Hire and can remove the City Manager by majority vote.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-success">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-user-tie me-2"></i>City Manager
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">‚úì Appointed by the City Council.</li>
                                        <li class="mb-2">‚úì Runs the day-to-day operations of the city.</li>
                                        <li class="mb-2">‚úì Oversees all city departments, including Sanitation Services.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-info">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-trash-alt me-2"></i>Sanitation Director
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">‚úì Reports directly to the City Manager.</li>
                                        <li class="mb-2">‚úì Responsible for operational decisions like service changes, routes, and policies for trash and recycling.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visual Accountability Chain -->
            <div id="section-accountability" class="card shadow mb-5">
                <div class="card-header bg-dark text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-sitemap me-2"></i>City of Dallas Governance ‚Äî Accountability Chain
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- City Council -->
                            <div class="text-center mb-4">
                                <div class="d-inline-block p-4 bg-primary text-white rounded shadow">
                                    <h4 class="mb-2">
                                        <i class="fas fa-users me-2"></i>City Council
                                    </h4>
                                    <p class="mb-0">Elected officials ‚Ä¢ Approve & can remove</p>
                                </div>
                            </div>
                            
                            <!-- Arrow down -->
                            <div class="text-center mb-3">
                                <i class="fas fa-arrow-down fa-3x text-primary"></i>
                            </div>
                            
                            <!-- City Manager -->
                            <div class="text-center mb-4">
                                <div class="d-inline-block p-4 bg-success text-white rounded shadow">
                                    <h4 class="mb-2">
                                        <i class="fas fa-user-tie me-2"></i>City Manager
                                    </h4>
                                    <p class="mb-0">Appointed by Council ‚Ä¢ Manages all city operations</p>
                                </div>
                            </div>
                            
                            <!-- Arrow down -->
                            <div class="text-center mb-3">
                                <i class="fas fa-arrow-down fa-3x text-success"></i>
                            </div>
                            
                            <!-- Sanitation Director -->
                            <div class="text-center mb-4">
                                <div class="d-inline-block p-4 bg-info text-white rounded shadow">
                                    <h4 class="mb-2">
                                        <i class="fas fa-trash-alt me-2"></i>Sanitation Director
                                    </h4>
                                    <p class="mb-0">Reports to City Manager ‚Ä¢ Makes operational decisions</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Council Members Cannot Hide Section -->
            <div class="card shadow mb-5">
                <div class="card-header bg-danger text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>Council Members: You Cannot Hide Behind General Statements
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <h5 class="text-danger">
                                <i class="fas fa-times-circle me-2"></i>‚ùå What They Say:
                            </h5>
                            <ul class="list-unstyled">
                                <li class="mb-3">
                                    <strong>"The decision has been made."</strong>
                                    <br><small class="text-muted">‚Üí Ask: "By whom? When? Where's the vote?"</small>
                                </li>
                                <li class="mb-3">
                                    <strong>"We don't get to vote on this issue."</strong>
                                    <br><small class="text-muted">‚Üí Ask: "Why not? You appoint the City Manager!"</small>
                                </li>
                                <li class="mb-3">
                                    <strong>"We are powerless."</strong>
                                    <br><small class="text-muted">‚Üí Ask: "You can remove the City Manager!"</small>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-4">
                            <h5 class="text-success">
                                <i class="fas fa-check-circle me-2"></i>‚úÖ What You Should Demand:
                            </h5>
                            <ul class="list-unstyled">
                                <li class="mb-3">
                                    <strong>Specific accountability:</strong>
                                    <br><small class="text-muted">Who made this decision? When?</small>
                                </li>
                                <li class="mb-3">
                                    <strong>Council oversight:</strong>
                                    <br><small class="text-muted">Demand a vote or public hearing</small>
                                </li>
                                <li class="mb-3">
                                    <strong>Action plan:</strong>
                                    <br><small class="text-muted">What will you do to reverse this?</small>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="text-center">
                        <p class="lead mb-4">
                            <strong>Remember: Council members have the power to hold the City Manager accountable. They can demand changes, reverse decisions, or even remove the City Manager if necessary.</strong>
                        </p>
                        <a href="/suggestions" class="btn btn-warning btn-lg">
                            <i class="fas fa-lightbulb me-2"></i>See What You Can Do
                        </a>
                    </div>
                </div>
            </div>

            <!-- Upcoming Town Hall Meetings Section -->
            <div id="meetings" class="card shadow mb-5">
                <div class="card-header bg-danger text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-calendar-alt me-2"></i>Upcoming Town Hall Meetings
                    </h3>
                </div>
                <div class="card-body">
                    <!-- Town Hall Announcements Section -->
                    <div class="town-hall-section">
                        <div class="town-hall-header">
                            üìÖ Upcoming Town Hall Meetings
                        </div>
                        
                        <!-- District 9 Town Hall -->
                        <div id="announcement-district9-budget" class="announcement-card warning-announcement">
                            <button class="dismiss-btn" data-dismiss-announcement="announcement-district9-budget" aria-label="Dismiss announcement">
                                √ó
                            </button>
                            <div class="announcement-content">
                                ‚ö†Ô∏è <strong>MUST ATTEND: District 9 Budget Town Hall</strong>
                                <br>
                                <strong>Thursday, August 28 ‚Ä¢ 6:00 PM - 7:00 PM</strong>
                                <br>
                                <strong>Location:</strong> Lochwood Branch Library, 11221 Lochwood Blvd
                                <br>
                                <strong>Councilperson:</strong> Paula Blackmon
                                <br><br>
                                <strong>Virtual presentation available:</strong> Thursday, August 21
                                <br><br>
                                We ask Our Councilperson Paula Blackmon to step up and do her job by killing or blocking implementation of this very ill-conceived budget cost saving measure.
                            </div>
                        </div>
                        
                        <!-- District 13 Town Hall -->
                        <div id="announcement-district13-budget" class="announcement-card info-announcement">
                            <button class="dismiss-btn" data-dismiss-announcement="announcement-district13-budget" aria-label="Dismiss announcement">
                                √ó
                            </button>
                            <div class="announcement-content">
                                ‚ÑπÔ∏è <strong>District 13 Budget Town Hall</strong>
                                <br>
                                <strong>Thursday, August 28 ‚Ä¢ 6:00 PM - 8:00 PM</strong>
                                <br>
                                <strong>Location:</strong> Walnut Hill Recreation Center, 10011 Midway Rd, Dallas, TX 75229
                                <br>
                                <strong>Host:</strong> Deputy Mayor Pro Tem Gay Donnell Willis
                            </div>
                        </div>
                    </div>
                    
                    <!-- General Meeting Info -->
                    <div id="section-budget-input" class="card border-primary">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">
                                <i class="fas fa-bullhorn me-2"></i>We Want Your Input on the City's Budget!
                            </h5>
                        </div>
                        <div class="card-body">
                            <p class="mb-2">Join us at a town hall meeting to discuss the budget for the Fiscal Year 2025-26.</p>
                            <p class="mb-2">We invite all Dallas residents to weigh in on how the City's tax dollars are spent.</p>
                            <p class="mb-2">Residents can voice their opinions virtually, in-person, or through our Teletownhall.</p>
                            <p class="mb-0">Our series of Budget Town Hall meetings will be hosted by members of the Dallas City Council.</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="/suggestions" class="btn btn-danger btn-lg">
                            <i class="fas fa-lightbulb me-2"></i>Get Involved - See What You Can Do
                        </a>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="text-center mb-5">
                <a href="/" class="btn btn-primary btn-lg me-3">
                    <i class="fas fa-home me-2"></i>‚Üê Back to Home
                </a>
                <a href="/suggestions" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-lightbulb me-2"></i>Contact Your Council Member
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.town-hall-section {
    margin: 20px 0;
}

.town-hall-header {
    background-color: #dc3545;
    color: white;
    padding: 12px 20px;
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 0;
}

.announcement-card {
    position: relative;
    margin-bottom: 15px;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.warning-announcement {
    background-color: #fff3cd;
    border: 1px solid #ffeaa7;
}

.info-announcement {
    background-color: #d1ecf1;
    border: 1px solid #bee5eb;
}

.dismiss-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    color: #666;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.dismiss-btn:hover {
    background-color: rgba(0,0,0,0.1);
    color: #333;
}

.announcement-content {
    margin-right: 40px; /* Space for the dismiss button */
    line-height: 1.5;
}
</style>

<!-- Simple JavaScript - No Toggle Functionality -->
<script>
// State management for dismissed announcements only
let dismissedAnnouncements = new Set();

// Load dismissed state from localStorage on page load
function loadDismissedState() {
    try {
        const saved = localStorage.getItem('townHallDismissed');
        if (saved) {
            dismissedAnnouncements = new Set(JSON.parse(saved));
        }
    } catch (error) {
        console.error('Error loading dismissed state:', error);
    }
}

// Save dismissed state to localStorage
function saveDismissedState() {
    try {
        localStorage.setItem('townHallDismissed', JSON.stringify([...dismissedAnnouncements]));
    } catch (error) {
        console.error('Error saving dismissed state:', error);
    }
}

// Dismiss an announcement
function dismissAnnouncement(announcementId) {
    dismissedAnnouncements.add(announcementId);
    saveDismissedState();
    
    const element = document.getElementById(announcementId);
    if (element) {
        element.style.display = 'none';
    }
}

// Apply dismissed state on page load
function applyDismissedState() {
    dismissedAnnouncements.forEach(announcementId => {
        const element = document.getElementById(announcementId);
        if (element) {
            element.style.display = 'none';
        }
    });
}

// Initialize everything when page loads
window.addEventListener('load', function() {
    console.log('Page fully loaded - initializing state management');
    
    // Load dismissed state from localStorage
    loadDismissedState();
    
    // Apply dismissed state to hide dismissed announcements
    applyDismissedState();
    
    // Add event listeners for dismiss buttons
    document.querySelectorAll('.dismiss-btn').forEach(button => {
        button.addEventListener('click', function() {
            const announcementId = this.getAttribute('data-dismiss-announcement');
            if (announcementId) {
                dismissAnnouncement(announcementId);
            }
        });
    });
});
</script>
